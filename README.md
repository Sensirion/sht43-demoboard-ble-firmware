# Mollehoj Firmware

Firmware for SHT43 DemoBoard.

## Introduction

This application is based on the [`STM32CubeWB SDK`](https://github.com/STMicroelectronics/STM32CubeWB).
The relevant SDK files are generated by the the [`STM32CubeMX`](https://www.st.com/en/development-tools/stm32cubemx.html) application into the lib folder.

The used version of STM32CubeMX is 6.8.0. The project file `./lib/lib.ioc` is the source of the generated output. All peripheral configurations can be looked up and found in this project file.
Even though [`STM32CubeMX`](https://www.st.com/en/development-tools/stm32cubemx.html) generates a working application skeleton, we do not use all of the generated sources but implement our own application structure.

All source code in the `./source` folder are defining the application and solely developed for the SHT43 DemoBoard purpose. Part of it is derived from the generated code of [`STM32CubeMX`](https://www.st.com/en/development-tools/stm32cubemx.html). The code in `./lib` is left untouched and has the coding style as defined by ST.

In the code under `./source` we have different coding conventions thar are enforced by clang-format.

The full documentation of the software is available on [`github pages`](https://sensirion.github.io/sht43-demoboard-ble-firmware)

## Building the application

Required tools:
* [CMake](https://cmake.org/)
* [Ninja](https://ninja-build.org/)
* [gcc-arm-none-eabi](https://developer.arm.com/downloads/-/gnu-rm)

Build the **release** configuration:

```bash
cmake -B build/release -DCMAKE_MAKE_PROGRAM=ninja -DCMAKE_BUILD_TYPE=release -G Ninja
cmake --build build/release
```

Build the **debug** configuration:

```bash
cmake -B build/debug -DCMAKE_MAKE_PROGRAM=ninja -DCMAKE_BUILD_TYPE=debug -G Ninja
cmake --build build/debug
```

## Code checks and formatting

Before building the source we first check if it conforms to our coding style and
if it has a standard formatting. These tools are used to
check the code on each push to the repository.

Required tools:
* [editorconfig-checker](https://github.com/editorconfig-checker/editorconfig-checker)
* [clang-format](https://clang.llvm.org/docs/ClangFormat.html)
* [cppcheck](https://cppcheck.sourceforge.io/)
* [clang-tidy](https://clang.llvm.org/extra/clang-tidy/)
* [codespell](https://github.com/codespell-project/codespell)

You can use `clang format` to standarize the formatting of all `.c` and `.h` files before
pushing code to the repository.

```bash
find source -type f -iregex ".*\.\(c\|h\)" -exec clang-format --i -style=file {} \;
```

How these tools are used in the build workflow you can see in the file
`./build_scripts/check.sh`.

## Building the documentation

Required tools:
* [Doxygen](https://www.doxygen.nl/)

```bash
doxygen documentation/doxygen/Doxyfile
```
